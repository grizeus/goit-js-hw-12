{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport axios from \"axios\";\n\nconst API_KEY = \"34523545-f21683fd59bfc3e4e2549fe07\";\nconst BASE_URL = \"https://pixabay.com/api\";\n\naxios.defaults.baseURL = BASE_URL;\nlet curPage = 1;\n\n// return response from pixabay api and current page as a tuple\nexport default async function fetchFrom(query, perPage) {\n  // set default perPage if not provided\n  if (perPage === undefined || perPage === null || perPage < 1) {\n    perPage = 15;\n  }\n\n  const params = {\n    key: API_KEY,\n    q: String(query),\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: perPage,\n    page: curPage,\n    };\n    \n  return axios\n    .get(\"/\", { params })\n    .then(response => {\n      return [ response.data, curPage++ ];\n    })\n    .catch(error => {\n      return console.error(error);\n    });\n}\n\nexport function resetPageCount() {\n  curPage = 1;\n}","\"use strict\";\n\nimport simpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"../css/custom-slb.css\";\n\nconst gallery = document.querySelector(\"ul.gallery-list\");\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function renderGallery(fetchData) {\n  if (fetchData[1] === 1) {\n    gallery.innerHTML = \"\";\n  }\n  const galleryMarkup = fetchData[0].hits\n    .map(picture => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = picture;\n      return `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" target=\"_blank\">\n                <div class=\"img-wrapper\">\n                  <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                </div>\n            </a>\n            <ul class=\"gallery-item-info\">\n                <li class=\"gallery-item-likes\"><b>Likes</b> ${likes}</li>\n                <li class=\"gallery-item-views\"><b>Views</b> ${views}</li>\n                <li class=\"gallery-item-comments\"><b>Comments</b> ${comments}</li>\n                <li class=\"gallery-item-downloads\"><b>Downloads</b> ${downloads}</li>\n            </ul>\n        </li>\n        `;\n    })\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup);\n\n  const lightbox = new simpleLightbox(\".gallery-list a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n  });\n}\n","export default \"data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fff'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fff'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","\"use strict\";\n\nimport fetchFrom, { resetPageCount } from \"./js/pixabay-api.js\";\nimport { renderGallery, clearGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"./css/custom-izitoast.css\";\nimport errSvg from \"./img/error.svg\";\n\nconst searchInput = document.querySelector(\".search-input\");\nconst searchButton = document.querySelector(\".search-btn\");\nconst loadButton = document.querySelector(\".load-btn\");\nconst topLoader = document.querySelector(\".in-loader\");\nconst moreLoader = document.querySelector(\".more-loader\");\nlet totalHits = 0;\nlet maxPages = 0;\nconst perPage = 15;\nlet searchQuery = \"\";\n\nconst TOAST_CONFIG = {\n  titleSize: \"16px\",\n  maxWidth: \"432px\",\n  position: \"topRight\",\n  closeOnEscape: true,\n  icon: \"error\",\n  iconUrl: errSvg,\n  theme: \"dark\",\n};\n\nsearchButton.addEventListener(\"click\", async e => {\n  e.preventDefault();\n  resetPageCount();\n\n  topLoader.classList.toggle(\"visually-hidden\");\n  searchQuery = searchInput.value.trim();\n\n  if (searchQuery === \"\") {\n    if (!topLoader.classList.contains(\"visually-hidden\")) {\n      topLoader.classList.toggle(\"visually-hidden\");\n    }\n    if (!loadButton.classList.contains(\"visually-hidden\")) {\n      loadButton.classList.toggle(\"visually-hidden\");\n    }\n    clearGallery();\n    return;\n  }\n\n  const res = await fetchFrom(searchQuery, perPage);\n\n  topLoader.classList.toggle(\"visually-hidden\");\n  loadButton.classList.toggle(\"visually-hidden\");\n\n  totalHits = parseInt(res[0].totalHits);\n  maxPages = Math.ceil(totalHits / perPage);\n\n  if (totalHits > 0) {\n    renderGallery(res);\n  } else {\n    clearGallery();\n    if (!loadButton.classList.contains(\"visually-hidden\")) {\n      loadButton.classList.toggle(\"visually-hidden\");\n    }\n    iziToast.error({\n      ...TOAST_CONFIG,\n      message:\n        \"Sorry, there are no images matching your search query. Please try again!\",\n    });\n  }\n});\n\nloadButton.addEventListener(\"click\", async e => {\n  e.preventDefault();\n\n  moreLoader.classList.toggle(\"visually-hidden\");\n  loadButton.classList.toggle(\"visually-hidden\");\n\n  const res = await fetchFrom(searchQuery, perPage);\n  moreLoader.classList.toggle(\"visually-hidden\");\n\n  if (maxPages > res[1]) {\n    const galleryCardHeight = document.querySelector(\".gallery-item\").getBoundingClientRect().height;\n    renderGallery(res);\n    window.scrollBy({\n      top: galleryCardHeight * 2,\n      left: 0,\n      behavior: \"smooth\"\n    });\n    loadButton.classList.toggle(\"visually-hidden\");\n  } else {\n    iziToast.error({\n      ...TOAST_CONFIG,\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n});"],"names":["API_KEY","BASE_URL","axios","curPage","fetchFrom","query","perPage","params","response","error","resetPageCount","gallery","clearGallery","renderGallery","fetchData","galleryMarkup","picture","webformatURL","largeImageURL","tags","likes","views","comments","downloads","simpleLightbox","errSvg","searchInput","searchButton","loadButton","topLoader","moreLoader","totalHits","maxPages","searchQuery","TOAST_CONFIG","e","res","iziToast","galleryCardHeight"],"mappings":"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"}